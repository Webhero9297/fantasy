/*globals $*/

/**
 * Check A Box v0.1.4
 * http://immobilienscout24.github.io/CheckABox/
 * compressed with http://refresh-sf.com/yui/
 */
$.fn.checkABox=function(m,d){var q={checkedClass:"ui-icon-on",uncheckedClass:"",iconClass:"ui-icon icon-ok",iconHtml:"<span></span>"},p=$(this),g="relatedIcon";function e(s){return s.prop(g)}function h(s){return s.is(":checked")}function f(t,s){t.prop("checked",s);t.trigger("change")}function n(u,t){var s=e(u);s.toggleClass(q.checkedClass,t);s.toggleClass(q.uncheckedClass,!t)}function k(){p.each(function(t,s){s=$(s);n(s,h(s))})}function r(s,t){f(s,t);n(s,t)}function b(s){r(s,!h(s))}function i(s){return(h(s)?q.checkedClass:q.uncheckedClass)}function j(s){s.stopPropagation();s.preventDefault()}function c(s){return(s.is("input[type='radio']")&&h(s))}function a(t){var s;return function(u){j(u);if(!s||s===u.type){s=u.type;j(u);if(!c(t)){b(t);k()}}}}function o(s){s.each(function(u,t){var w,v,x=$(t);if(!x.prop("checkABoxEnabled")){x.prop("checkABoxEnabled",true);w=$(q.iconHtml);w.addClass(i(x)+" "+q.iconClass);x.prop(g,w);v=x.parent();v.on("mousedown click touchstart",a(x));w.insertBefore(x)}})}function l(s){d=d||{};$.extend(q,d);if(typeof s==="boolean"){r(p,s)}else{if(s==="toggle"){b(p)}else{if(s==="bind"){o(p)}else{if(s==="refresh"){k()}}}}}l(m);return p};